
# Add Google Sign-In to Auth Page

This plan adds Google Sign-In as a quick, low-friction option while keeping the existing email/password flow as an alternative.

---

## Summary

We'll add a "Continue with Google" button at the top of the auth form, positioned as the easiest path forward. The email/password form stays below as a fallback option, separated by an "or" divider. This aligns with the "tiny wins" strategy - one-click sign-up is the ultimate low-friction experience.

---

## Design Approach

**Layout order (top to bottom):**
1. Google Sign-In button (primary, one-click option)
2. "or" divider
3. Email/password form (existing, as fallback)

**Why this order?**
- Google button first = lowest friction path is most visible
- Users who prefer email can scroll down slightly
- Matches patterns users expect from modern apps

---

## Visual Design

The Google button will:
- Match the calm, human brand aesthetic
- Use the official Google logo for trust
- Have clear hover states
- Show loading state during authentication

---

## Technical Details

### Step 1: Configure Google OAuth

Lovable Cloud provides managed Google OAuth - no API keys needed. We'll use the built-in configuration tool to enable it, which will generate the necessary integration code.

### Step 2: Update Auth.tsx

**Add imports:**
```typescript
import { lovable } from "@/integrations/lovable/index";
```

**Add Google sign-in handler:**
```typescript
const [googleLoading, setGoogleLoading] = useState(false);

const handleGoogleSignIn = async () => {
  setGoogleLoading(true);
  try {
    const { error } = await lovable.auth.signInWithOAuth("google", {
      redirect_uri: window.location.origin,
    });
    if (error) {
      toast({
        title: 'Error',
        description: error.message,
        variant: 'destructive',
      });
    }
  } catch (err) {
    toast({
      title: 'Error',
      description: 'Something went wrong. Please try again.',
      variant: 'destructive',
    });
  } finally {
    setGoogleLoading(false);
  }
};
```

**Add UI elements (inserted before the email form):**
```tsx
{/* Google Sign-In - only show on login/signup, not forgot password */}
{!isForgotPassword && (
  <>
    <Button
      type="button"
      variant="outline"
      className="w-full h-12 font-semibold gap-3"
      onClick={handleGoogleSignIn}
      disabled={googleLoading}
    >
      <svg className="h-5 w-5" viewBox="0 0 24 24">
        {/* Google logo SVG path */}
      </svg>
      {googleLoading ? '...' : 'Continue with Google'}
    </Button>
    
    <div className="relative">
      <div className="absolute inset-0 flex items-center">
        <span className="w-full border-t border-border/60" />
      </div>
      <div className="relative flex justify-center text-xs">
        <span className="bg-background px-3 text-muted-foreground">
          or
        </span>
      </div>
    </div>
  </>
)}
```

---

## Implementation Steps

| Step | Action |
|------|--------|
| 1 | Run configure-social-auth tool to enable Google OAuth |
| 2 | Import the lovable integration module |
| 3 | Add googleLoading state and handleGoogleSignIn function |
| 4 | Add Google button and "or" divider above email form |
| 5 | Add Google SVG icon for brand recognition |

---

## Files Modified

| File | Changes |
|------|---------|
| `src/integrations/lovable/index.ts` | Auto-generated by configure tool |
| `src/pages/Auth.tsx` | Google button, handler, divider |

---

## User Experience Flow

```text
User lands on /auth
        │
        ▼
┌─────────────────────────────┐
│   "Continue with Google"    │  ← One click, done
│         [ Button ]          │
└─────────────────────────────┘
        │
        ▼
    ─── or ───
        │
        ▼
┌─────────────────────────────┐
│   Email: [____________]     │
│   Password: [__________]    │  ← Traditional option
│   [ Create Account ]        │
└─────────────────────────────┘
```

---

## Security Notes

- Lovable Cloud's managed OAuth handles all token security
- No API keys stored in frontend code
- OAuth flow uses secure redirects
- Existing session management continues to work
